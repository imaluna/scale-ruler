"use strict";function t(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);n>e;e++)r[e]=t[e];return r}function n(t,n,e){return n&&function(t,n){for(var e=0;n.length>e;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function e(n){return function(n){if(Array.isArray(n))return t(n)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||o(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t){var n=function(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return t+""}(t,"string");return"symbol"==typeof n?n:n+""}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(n,e){if(n){if("string"==typeof n)return t(n,e);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(n,e):void 0}}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var c,f,s={};function l(){if(f)return c;f=1;var t=function(t){return t&&t.Math===Math&&t};return c=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof a&&a)||t("object"==typeof c&&c)||function(){return this}()||Function("return this")()}var v,p,h,d,y,g,m,b,S={};function w(){return p?v:(p=1,v=function(t){try{return!!t()}catch(t){return!0}})}function C(){if(d)return h;d=1;var t=w();return h=!t((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))}function E(){if(g)return y;g=1;var t=w();return y=!t((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))}function x(){if(b)return m;b=1;var t=E(),n=Function.prototype.call;return m=t?n.bind(n):function(){return n.apply(n,arguments)},m}var L,O,j,k,_,M,T,A,P,R,Y,B,I,X,D,W,z,F,H,N,G,K,V,U,$,q,J,Q,Z,tt,nt,et,rt,it,ot,at,ut,ct,ft,st,lt,vt={};function pt(){if(L)return vt;L=1;var t={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,e=n&&!t.call({1:2},1);return vt.f=e?function(t){var e=n(this,t);return!!e&&e.enumerable}:t,vt}function ht(){return j?O:(j=1,O=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}})}function dt(){if(_)return k;_=1;var t=E(),n=Function.prototype,e=n.call,r=t&&n.bind.bind(e,e);return k=t?r:function(t){return function(){return e.apply(t,arguments)}},k}function yt(){if(T)return M;T=1;var t=dt(),n=t({}.toString),e=t("".slice);return M=function(t){return e(n(t),8,-1)}}function gt(){if(P)return A;P=1;var t=dt(),n=w(),e=yt(),r=Object,i=t("".split);return A=n((function(){return!r("z").propertyIsEnumerable(0)}))?function(t){return"String"===e(t)?i(t,""):r(t)}:r}function mt(){return Y?R:(Y=1,R=function(t){return null==t})}function bt(){if(I)return B;I=1;var t=mt(),n=TypeError;return B=function(e){if(t(e))throw new n("Can't call method on "+e);return e}}function St(){if(D)return X;D=1;var t=gt(),n=bt();return X=function(e){return t(n(e))}}function wt(){if(z)return W;z=1;var t="object"==typeof document&&document.all;return W=void 0===t&&void 0!==t?function(n){return"function"==typeof n||n===t}:function(t){return"function"==typeof t}}function Ct(){if(H)return F;H=1;var t=wt();return F=function(n){return"object"==typeof n?null!==n:t(n)}}function Et(){if(G)return N;G=1;var t=l(),n=wt();return N=function(e,r){return 2>arguments.length?n(i=t[e])?i:void 0:t[e]&&t[e][r];var i},N}function xt(){if(V)return K;V=1;var t=dt();return K=t({}.isPrototypeOf)}function Lt(){if($)return U;$=1;var t=l().navigator,n=t&&t.userAgent;return U=n?n+"":""}function Ot(){if(J)return q;J=1;var t,n,e=l(),r=Lt(),i=e.process,o=e.Deno,a=i&&i.versions||o&&o.version,u=a&&a.v8;return u&&(n=(t=u.split("."))[0]>0&&4>t[0]?1:+(t[0]+t[1])),!n&&r&&((t=r.match(/Edge\/(\d+)/))&&74>t[1]||(t=r.match(/Chrome\/(\d+)/))&&(n=+t[1])),q=n}function jt(){if(Z)return Q;Z=1;var t=Ot(),n=w(),e=l().String;return Q=!!Object.getOwnPropertySymbols&&!n((function(){var n=Symbol("symbol detection");return!e(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&t&&41>t}))}function kt(){if(nt)return tt;nt=1;var t=jt();return tt=t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}function _t(){if(rt)return et;rt=1;var t=Et(),n=wt(),e=xt(),r=kt(),i=Object;return et=r?function(t){return"symbol"==typeof t}:function(r){var o=t("Symbol");return n(o)&&e(o.prototype,i(r))}}function Mt(){if(ot)return it;ot=1;var t=String;return it=function(n){try{return t(n)}catch(t){return"Object"}}}function Tt(){if(ut)return at;ut=1;var t=wt(),n=Mt(),e=TypeError;return at=function(r){if(t(r))return r;throw new e(n(r)+" is not a function")}}function At(){if(ft)return ct;ft=1;var t=Tt(),n=mt();return ct=function(e,r){var i=e[r];return n(i)?void 0:t(i)}}function Pt(){if(lt)return st;lt=1;var t=x(),n=wt(),e=Ct(),r=TypeError;return st=function(i,o){var a,u;if("string"===o&&n(a=i.toString)&&!e(u=t(a,i)))return u;if(n(a=i.valueOf)&&!e(u=t(a,i)))return u;if("string"!==o&&n(a=i.toString)&&!e(u=t(a,i)))return u;throw new r("Can't convert object to primitive value")}}var Rt,Yt,Bt,It,Xt,Dt,Wt,zt,Ft,Ht,Nt,Gt,Kt,Vt,Ut,$t,qt,Jt,Qt,Zt,tn,nn,en,rn,on={exports:{}};function an(){if(It)return Bt;It=1;var t=l(),n=Object.defineProperty;return Bt=function(e,r){try{n(t,e,{value:r,configurable:!0,writable:!0})}catch(n){t[e]=r}return r}}function un(){if(Xt)return on.exports;Xt=1;var t=Yt?Rt:(Yt=1,Rt=!1),n=l(),e=an(),r="__core-js_shared__",i=on.exports=n[r]||e(r,{});return(i.versions||(i.versions=[])).push({version:"3.40.0",mode:t?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE",source:"https://github.com/zloirock/core-js"}),on.exports}function cn(){if(Wt)return Dt;Wt=1;var t=un();return Dt=function(n,e){return t[n]||(t[n]=e||{})}}function fn(){if(Ft)return zt;Ft=1;var t=bt(),n=Object;return zt=function(e){return n(t(e))}}function sn(){if(Nt)return Ht;Nt=1;var t=dt(),n=fn(),e=t({}.hasOwnProperty);return Ht=Object.hasOwn||function(t,r){return e(n(t),r)}}function ln(){if(Kt)return Gt;Kt=1;var t=dt(),n=0,e=Math.random(),r=t(1..toString);return Gt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+r(++n+e,36)}}function vn(){if(Ut)return Vt;Ut=1;var t=l(),n=cn(),e=sn(),r=ln(),i=jt(),o=kt(),a=t.Symbol,u=n("wks"),c=o?a.for||a:a&&a.withoutSetter||r;return Vt=function(t){return e(u,t)||(u[t]=i&&e(a,t)?a[t]:c("Symbol."+t)),u[t]}}function pn(){if(qt)return $t;qt=1;var t=x(),n=Ct(),e=_t(),r=At(),i=Pt(),o=vn(),a=TypeError,u=o("toPrimitive");return $t=function(o,c){if(!n(o)||e(o))return o;var f,s=r(o,u);if(s){if(void 0===c&&(c="default"),f=t(s,o,c),!n(f)||e(f))return f;throw new a("Can't convert object to primitive value")}return void 0===c&&(c="number"),i(o,c)}}function hn(){if(Qt)return Jt;Qt=1;var t=pn(),n=_t();return Jt=function(e){var r=t(e,"string");return n(r)?r:r+""}}function dn(){if(tn)return Zt;tn=1;var t=l(),n=Ct(),e=t.document,r=n(e)&&n(e.createElement);return Zt=function(t){return r?e.createElement(t):{}}}function yn(){if(en)return nn;en=1;var t=C(),n=w(),e=dn();return nn=!t&&!n((function(){return 7!==Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a}))}function gn(){if(rn)return S;rn=1;var t=C(),n=x(),e=pt(),r=ht(),i=St(),o=hn(),a=sn(),u=yn(),c=Object.getOwnPropertyDescriptor;return S.f=t?c:function(t,f){if(t=i(t),f=o(f),u)try{return c(t,f)}catch(t){}if(a(t,f))return r(!n(e.f,t,f),t[f])},S}var mn,bn,Sn,wn,Cn,En,xn,Ln={};function On(){if(wn)return Sn;wn=1;var t=Ct(),n=String,e=TypeError;return Sn=function(r){if(t(r))return r;throw new e(n(r)+" is not an object")}}function jn(){if(Cn)return Ln;Cn=1;var t=C(),n=yn(),e=function(){if(bn)return mn;bn=1;var t=C(),n=w();return mn=t&&n((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))}(),r=On(),i=hn(),o=TypeError,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c="enumerable",f="configurable",s="writable";return Ln.f=t?e?function(t,n,e){if(r(t),n=i(n),r(e),"function"==typeof t&&"prototype"===n&&"value"in e&&s in e&&!e[s]){var o=u(t,n);o&&o[s]&&(t[n]=e.value,e={configurable:f in e?e[f]:o[f],enumerable:c in e?e[c]:o[c],writable:!1})}return a(t,n,e)}:a:function(t,e,u){if(r(t),e=i(e),r(u),n)try{return a(t,e,u)}catch(t){}if("get"in u||"set"in u)throw new o("Accessors not supported");return"value"in u&&(t[e]=u.value),t},Ln}function kn(){if(xn)return En;xn=1;var t=C(),n=jn(),e=ht();return En=t?function(t,r,i){return n.f(t,r,e(1,i))}:function(t,n,e){return t[n]=e,t}}var _n,Mn,Tn,An,Pn,Rn,Yn,Bn,In,Xn,Dn,Wn,zn,Fn,Hn,Nn={exports:{}};function Gn(){if(Mn)return _n;Mn=1;var t=C(),n=sn(),e=Function.prototype,r=t&&Object.getOwnPropertyDescriptor,i=n(e,"name"),o=i&&!1,a=i&&(!t||t&&r(e,"name").configurable);return _n={EXISTS:i,PROPER:o,CONFIGURABLE:a}}function Kn(){if(An)return Tn;An=1;var t=dt(),n=wt(),e=un(),r=t(Function.toString);return n(e.inspectSource)||(e.inspectSource=function(t){return r(t)}),Tn=e.inspectSource}function Vn(){if(Bn)return Yn;Bn=1;var t=cn(),n=ln(),e=t("keys");return Yn=function(t){return e[t]||(e[t]=n(t))}}function Un(){return Xn?In:(Xn=1,In={})}function $n(){if(Wn)return Dn;Wn=1;var t,n,e,r=function(){if(Rn)return Pn;Rn=1;var t=l(),n=wt(),e=t.WeakMap;return Pn=n(e)&&/native code/.test(e+"")}(),i=l(),o=Ct(),a=kn(),u=sn(),c=un(),f=Vn(),s=Un(),v="Object already initialized",p=i.TypeError;if(r||c.state){var h=c.state||(c.state=new(0,i.WeakMap));h.get=h.get,h.has=h.has,h.set=h.set,t=function(t,n){if(h.has(t))throw new p(v);return n.facade=t,h.set(t,n),n},n=function(t){return h.get(t)||{}},e=function(t){return h.has(t)}}else{var d=f("state");s[d]=!0,t=function(t,n){if(u(t,d))throw new p(v);return n.facade=t,a(t,d,n),n},n=function(t){return u(t,d)?t[d]:{}},e=function(t){return u(t,d)}}return Dn={set:t,get:n,has:e,enforce:function(r){return e(r)?n(r):t(r,{})},getterFor:function(t){return function(e){var r;if(!o(e)||(r=n(e)).type!==t)throw new p("Incompatible receiver, "+t+" required");return r}}}}function qn(){if(zn)return Nn.exports;zn=1;var t=dt(),n=w(),e=wt(),r=sn(),i=C(),o=Gn().CONFIGURABLE,a=Kn(),u=$n(),c=u.enforce,f=u.get,s=String,l=Object.defineProperty,v=t("".slice),p=t("".replace),h=t([].join),d=i&&!n((function(){return 8!==l((function(){}),"length",{value:8}).length})),y=(String+"").split("String"),g=Nn.exports=function(t,n,e){"Symbol("===v(s(n),0,7)&&(n="["+p(s(n),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),e&&e.getter&&(n="get "+n),e&&e.setter&&(n="set "+n),(!r(t,"name")||o&&t.name!==n)&&(i?l(t,"name",{value:n,configurable:!0}):t.name=n),d&&e&&r(e,"arity")&&t.length!==e.arity&&l(t,"length",{value:e.arity});try{e&&r(e,"constructor")&&e.constructor?i&&l(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=c(t);return r(a,"source")||(a.source=h(y,"string"==typeof n?n:"")),t};return Function.prototype.toString=g((function(){return e(this)&&f(this).source||a(this)}),"toString"),Nn.exports}function Jn(){if(Hn)return Fn;Hn=1;var t=wt(),n=jn(),e=qn(),r=an();return Fn=function(i,o,a,u){u||(u={});var c=u.enumerable,f=void 0!==u.name?u.name:o;if(t(a)&&e(a,f,u),u.global)c?i[o]=a:r(o,a);else{try{u.unsafe?i[o]&&(c=!0):delete i[o]}catch(t){}c?i[o]=a:n.f(i,o,{value:a,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return i}}var Qn,Zn,te,ne,ee,re,ie,oe,ae,ue,ce,fe,se,le,ve,pe,he,de={};function ye(){if(ne)return te;ne=1;var t=function(){if(Zn)return Qn;Zn=1;var t=Math.ceil,n=Math.floor;return Qn=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}}();return te=function(n){var e=+n;return e!=e||0===e?0:t(e)}}function ge(){if(re)return ee;re=1;var t=ye(),n=Math.max,e=Math.min;return ee=function(r,i){var o=t(r);return 0>o?n(o+i,0):e(o,i)}}function me(){if(oe)return ie;oe=1;var t=ye(),n=Math.min;return ie=function(e){var r=t(e);return r>0?n(r,9007199254740991):0}}function be(){if(ue)return ae;ue=1;var t=me();return ae=function(n){return t(n.length)}}function Se(){if(fe)return ce;fe=1;var t=St(),n=ge(),e=be(),r=function(r){return function(i,o,a){var u=t(i),c=e(u);if(0===c)return!r&&-1;var f,s=n(a,c);if(r&&o!=o){for(;c>s;)if((f=u[s++])!=f)return!0}else for(;c>s;s++)if((r||s in u)&&u[s]===o)return r||s||0;return!r&&-1}};return ce={includes:r(!0),indexOf:r(!1)}}function we(){if(le)return se;le=1;var t=dt(),n=sn(),e=St(),r=Se().indexOf,i=Un(),o=t([].push);return se=function(t,a){var u,c=e(t),f=0,s=[];for(u in c)!n(i,u)&&n(c,u)&&o(s,u);for(;a.length>f;)n(c,u=a[f++])&&(~r(s,u)||o(s,u));return s}}function Ce(){return pe?ve:(pe=1,ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}function Ee(){if(he)return de;he=1;var t=we(),n=Ce().concat("length","prototype");return de.f=Object.getOwnPropertyNames||function(e){return t(e,n)},de}var xe,Le,Oe,je,ke,_e,Me,Te,Ae,Pe,Re,Ye,Be,Ie,Xe,De,We,ze,Fe,He,Ne,Ge,Ke,Ve,Ue,$e,qe,Je,Qe={};function Ze(){return xe||(xe=1,Qe.f=Object.getOwnPropertySymbols),Qe}function tr(){if(Oe)return Le;Oe=1;var t=Et(),n=dt(),e=Ee(),r=Ze(),i=On(),o=n([].concat);return Le=t("Reflect","ownKeys")||function(t){var n=e.f(i(t)),a=r.f;return a?o(n,a(t)):n}}function nr(){if(ke)return je;ke=1;var t=sn(),n=tr(),e=gn(),r=jn();return je=function(i,o,a){for(var u=n(o),c=r.f,f=e.f,s=0;u.length>s;s++){var l=u[s];t(i,l)||a&&t(a,l)||c(i,l,f(o,l))}}}function er(){if(Ae)return Te;Ae=1;var t=l(),n=gn().f,e=kn(),r=Jn(),i=an(),o=nr(),a=function(){if(Me)return _e;Me=1;var t=w(),n=wt(),e=/#|\.prototype\./,r=function(e,r){var c=o[i(e)];return c===u||c!==a&&(n(r)?t(r):!!r)},i=r.normalize=function(t){return(t+"").replace(e,".").toLowerCase()},o=r.data={},a=r.NATIVE="N",u=r.POLYFILL="P";return _e=r}();return Te=function(u,c){var f,s,l,v,p,h=u.target,d=u.global,y=u.stat;if(f=d?t:y?t[h]||i(h,{}):t[h]&&t[h].prototype)for(s in c){if(v=c[s],l=u.dontCallGetSet?(p=n(f,s))&&p.value:f[s],!a(d?s:h+(y?".":"#")+s,u.forced)&&void 0!==l){if(typeof v==typeof l)continue;o(v,l)}(u.sham||l&&l.sham)&&e(v,"sham",!0),r(f,s,v,u)}}}function rr(){if(Re)return Pe;Re=1;var t=yt();return Pe=Array.isArray||function(n){return"Array"===t(n)}}function ir(){if(Be)return Ye;Be=1;var t=TypeError;return Ye=function(n){if(n>9007199254740991)throw t("Maximum allowed index exceeded");return n}}function or(){if(Xe)return Ie;Xe=1;var t=C(),n=jn(),e=ht();return Ie=function(r,i,o){t?n.f(r,i,e(0,o)):r[i]=o}}function ar(){if(We)return De;We=1;var t={};return t[vn()("toStringTag")]="z",De=t+""=="[object z]"}function ur(){if(Fe)return ze;Fe=1;var t=ar(),n=wt(),e=yt(),r=vn()("toStringTag"),i=Object,o="Arguments"===e(function(){return arguments}());return ze=t?e:function(t){var a,u,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(u=function(t,n){try{return t[n]}catch(t){}}(a=i(t),r))?u:o?e(a):"Object"===(c=e(a))&&n(a.callee)?"Arguments":c}}function cr(){if(Ne)return He;Ne=1;var t=dt(),n=w(),e=wt(),r=ur(),i=Et(),o=Kn(),a=function(){},u=i("Reflect","construct"),c=/^\s*(?:class|function)\b/,f=t(c.exec),s=!c.test(a),l=function(t){if(!e(t))return!1;try{return u(a,[],t),!0}catch(t){return!1}},v=function(t){if(!e(t))return!1;switch(r(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return s||!!f(c,o(t))}catch(t){return!0}};return v.sham=!0,He=!u||n((function(){var t;return l(l.call)||!l(Object)||!l((function(){t=!0}))||t}))?v:l}function fr(){if(Ke)return Ge;Ke=1;var t=rr(),n=cr(),e=Ct(),r=vn()("species"),i=Array;return Ge=function(o){var a;return t(o)&&(n(a=o.constructor)&&(a===i||t(a.prototype))||e(a)&&null===(a=a[r]))&&(a=void 0),void 0===a?i:a}}function sr(){if(Ue)return Ve;Ue=1;var t=fr();return Ve=function(n,e){return new(t(n))(0===e?0:e)}}function lr(){if(qe)return $e;qe=1;var t=w(),n=vn(),e=Ot(),r=n("species");return $e=function(n){return e>=51||!t((function(){var t=[];return(t.constructor={})[r]=function(){return{foo:1}},1!==t[n](Boolean).foo}))}}!function(){if(Je)return s;Je=1;var t=er(),n=w(),e=rr(),r=Ct(),i=fn(),o=be(),a=ir(),u=or(),c=sr(),f=lr(),l=vn(),v=Ot(),p=l("isConcatSpreadable"),h=v>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),d=function(t){if(!r(t))return!1;var n=t[p];return void 0!==n?!!n:e(t)};t({target:"Array",proto:!0,arity:1,forced:!h||!f("concat")},{concat:function(t){var n,e,r,f,s,l=i(this),v=c(l,0),p=0;for(n=-1,r=arguments.length;r>n;n++)if(d(s=-1===n?l:arguments[n]))for(f=o(s),a(p+f),e=0;f>e;e++,p++)e in s&&u(v,p,s[e]);else a(p+1),u(v,p++,s);return v.length=p,v}})}();var vr,pr,hr,dr,yr,gr,mr,br={};function Sr(){if(pr)return vr;pr=1;var t=yt(),n=dt();return vr=function(e){if("Function"===t(e))return n(e)}}function wr(){if(gr)return yr;gr=1;var t=function(){if(dr)return hr;dr=1;var t=Sr(),n=Tt(),e=E(),r=t(t.bind);return hr=function(t,i){return n(t),void 0===i?t:e?r(t,i):function(){return t.apply(i,arguments)}},hr}(),n=dt(),e=gt(),r=fn(),i=be(),o=sr(),a=n([].push),u=function(n){var u=1===n,c=2===n,f=3===n,s=4===n,l=6===n,v=7===n,p=5===n||l;return function(h,d,y,g){for(var m,b,S=r(h),w=e(S),C=i(w),E=t(d,y),x=0,L=g||o,O=u?L(h,C):c||v?L(h,0):void 0;C>x;x++)if((p||x in w)&&(b=E(m=w[x],x,S),n))if(u)O[x]=b;else if(b)switch(n){case 3:return!0;case 5:return m;case 6:return x;case 2:a(O,m)}else switch(n){case 4:return!1;case 7:a(O,m)}return l?-1:f||s?s:O}};return yr={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}}!function(){if(mr)return br;mr=1;var t=er(),n=wr().filter;t({target:"Array",proto:!0,forced:!lr()("filter")},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}();var Cr,Er,xr,Lr={};function Or(){if(Er)return Cr;Er=1;var t=w();return Cr=function(n,e){var r=[][n];return!!r&&t((function(){r.call(null,e||function(){return 1},1)}))}}!function(){if(xr)return Lr;xr=1;var t=er(),n=Sr(),e=Se().indexOf,r=Or(),i=n([].indexOf),o=!!i&&0>1/i([1],1,-0);t({target:"Array",proto:!0,forced:o||!r("indexOf")},{indexOf:function(t){var n=arguments.length>1?arguments[1]:void 0;return o?i(this,t,n)||0:e(this,t,n)}})}();var jr,kr={};!function(){if(jr)return kr;jr=1;var t=er(),n=dt(),e=gt(),r=St(),i=Or(),o=n([].join);t({target:"Array",proto:!0,forced:e!==Object||!i("join",",")},{join:function(t){return o(r(this),void 0===t?",":t)}})}();var _r,Mr={};!function(){if(_r)return Mr;_r=1;var t=er(),n=wr().map;t({target:"Array",proto:!0,forced:!lr()("map")},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}();var Tr,Ar,Pr,Rr,Yr,Br,Ir,Xr,Dr,Wr,zr,Fr,Hr,Nr,Gr,Kr={};function Vr(){if(Ar)return Tr;Ar=1;var t=Mt(),n=TypeError;return Tr=function(e,r){if(!delete e[r])throw new n("Cannot delete property "+t(r)+" of "+t(e))}}function Ur(){if(Rr)return Pr;Rr=1;var t=ur(),n=String;return Pr=function(e){if("Symbol"===t(e))throw new TypeError("Cannot convert a Symbol value to a string");return n(e)}}function $r(){if(Br)return Yr;Br=1;var t=dt();return Yr=t([].slice)}!function(){if(Gr)return Kr;Gr=1;var t=er(),n=dt(),e=Tt(),r=fn(),i=be(),o=Vr(),a=Ur(),u=w(),c=function(){if(Xr)return Ir;Xr=1;var t=$r(),n=Math.floor,e=function(r,i){var o=r.length;if(8>o)for(var a,u,c=1;o>c;){for(u=c,a=r[c];u&&i(r[u-1],a)>0;)r[u]=r[--u];u!==c++&&(r[u]=a)}else for(var f=n(o/2),s=e(t(r,0,f),i),l=e(t(r,f),i),v=s.length,p=l.length,h=0,d=0;v>h||p>d;)r[h+d]=v>h&&p>d?i(s[h],l[d])>0?l[d++]:s[h++]:v>h?s[h++]:l[d++];return r};return Ir=e}(),f=Or(),s=function(){if(Wr)return Dr;Wr=1;var t=Lt().match(/firefox\/(\d+)/i);return Dr=!!t&&+t[1]}(),l=function(){if(Fr)return zr;Fr=1;var t=Lt();return zr=/MSIE|Trident/.test(t)}(),v=Ot(),p=function(){if(Nr)return Hr;Nr=1;var t=Lt().match(/AppleWebKit\/(\d+)\./);return Hr=!!t&&+t[1]}(),h=[],d=n(h.sort),y=n(h.push),g=u((function(){h.sort(void 0)})),m=u((function(){h.sort(null)})),b=f("sort"),S=!u((function(){if(v)return 70>v;if(!s||3>=s){if(l)return!0;if(p)return 603>p;var t,n,e,r,i="";for(t=65;76>t;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;47>r;r++)h.push({k:n+r,v:e})}for(h.sort((function(t,n){return n.v-t.v})),r=0;h.length>r;r++)n=h[r].k.charAt(0),i.charAt(i.length-1)!==n&&(i+=n);return"DGBEFHACIJK"!==i}}));t({target:"Array",proto:!0,forced:g||!m||!b||!S},{sort:function(t){void 0!==t&&e(t);var n=r(this);if(S)return void 0===t?d(n):d(n,t);var u,f,s=[],l=i(n);for(f=0;l>f;f++)f in n&&y(s,n[f]);for(c(s,function(t){return function(n,e){return void 0===e?-1:void 0===n?1:void 0!==t?+t(n,e)||0:a(n)>a(e)?1:-1}}(t)),u=i(s),f=0;u>f;)n[f]=s[f++];for(;l>f;)o(n,f++);return n}})}();var qr,Jr,Qr,Zr={};!function(){if(Qr)return Zr;Qr=1;var t=er(),n=fn(),e=ge(),r=ye(),i=be(),o=function(){if(Jr)return qr;Jr=1;var t=C(),n=rr(),e=TypeError,r=Object.getOwnPropertyDescriptor,i=t&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();return qr=i?function(t,i){if(n(t)&&!r(t,"length").writable)throw new e("Cannot set read only .length");return t.length=i}:function(t,n){return t.length=n}}(),a=ir(),u=sr(),c=or(),f=Vr(),s=lr()("splice"),l=Math.max,v=Math.min;t({target:"Array",proto:!0,forced:!s},{splice:function(t,s){var p,h,d,y,g,m,b=n(this),S=i(b),w=e(t,S),C=arguments.length;for(0===C?p=h=0:1===C?(p=0,h=S-w):(p=C-2,h=v(l(r(s),0),S-w)),a(S+p-h),d=u(b,h),y=0;h>y;y++)(g=w+y)in b&&c(d,y,b[g]);if(d.length=h,h>p){for(y=w;S-h>y;y++)m=y+p,(g=y+h)in b?b[m]=b[g]:f(b,m);for(y=S;y>S-h+p;y--)f(b,y-1)}else if(p>h)for(y=S-h;y>w;y--)m=y+p-1,(g=y+h-1)in b?b[m]=b[g]:f(b,m);for(y=0;p>y;y++)b[y+w]=arguments[y+2];return o(b,S-h+p),d}})}();var ti,ni,ei,ri,ii,oi={};function ai(){if(ni)return ti;ni=1;var t=we(),n=Ce();return ti=Object.keys||function(e){return t(e,n)}}!function(){if(ii)return oi;ii=1;var t=er(),n=function(){if(ri)return ei;ri=1;var t=C(),n=dt(),e=x(),r=w(),i=ai(),o=Ze(),a=pt(),u=fn(),c=gt(),f=Object.assign,s=Object.defineProperty,l=n([].concat);return ei=!f||r((function(){if(t&&1!==f({b:1},f(s({},"a",{enumerable:!0,get:function(){s(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},e={},r=Symbol("assign detection"),o="abcdefghijklmnopqrst";return n[r]=7,o.split("").forEach((function(t){e[t]=t})),7!==f({},n)[r]||i(f({},e)).join("")!==o}))?function(n,r){for(var f=u(n),s=arguments.length,v=1,p=o.f,h=a.f;s>v;)for(var d,y=c(arguments[v++]),g=p?l(i(y),p(y)):i(y),m=g.length,b=0;m>b;)d=g[b++],t&&!e(h,y,d)||(f[d]=y[d]);return f}:f,ei}();t({target:"Object",stat:!0,arity:2,forced:Object.assign!==n},{assign:n})}();var ui,ci,fi={};function si(){if(ci)return ui;ci=1;var t=w();return ui=!t((function(){return Object.isExtensible(Object.preventExtensions({}))}))}var li,vi,pi,hi,di,yi,gi,mi={exports:{}},bi={};function Si(){if(li)return bi;li=1;var t=yt(),n=St(),e=Ee().f,r=$r(),i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];return bi.f=function(o){return i&&"Window"===t(o)?function(t){try{return e(t)}catch(t){return r(i)}}(o):e(n(o))},bi}function wi(){if(di)return hi;di=1;var t=w(),n=Ct(),e=yt(),r=function(){if(pi)return vi;pi=1;var t=w();return vi=t((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))}(),i=Object.isExtensible,o=t((function(){}));return hi=o||r?function(t){return!!n(t)&&((!r||"ArrayBuffer"!==e(t))&&(!i||i(t)))}:i}!function(){if(gi)return fi;gi=1;var t=er(),n=si(),e=w(),r=Ct(),i=function(){if(yi)return mi.exports;yi=1;var t=er(),n=dt(),e=Un(),r=Ct(),i=sn(),o=jn().f,a=Ee(),u=Si(),c=wi(),f=ln(),s=si(),l=!1,v=f("meta"),p=0,h=function(t){o(t,v,{value:{objectID:"O"+p++,weakData:{}}})},d=mi.exports={enable:function(){d.enable=function(){},l=!0;var e=a.f,r=n([].splice),i={};i[v]=1,e(i).length&&(a.f=function(t){for(var n=e(t),i=0,o=n.length;o>i;i++)if(n[i]===v){r(n,i,1);break}return n},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(t,n){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,v)){if(!c(t))return"F";if(!n)return"E";h(t)}return t[v].objectID},getWeakData:function(t,n){if(!i(t,v)){if(!c(t))return!0;if(!n)return!1;h(t)}return t[v].weakData},onFreeze:function(t){return s&&l&&c(t)&&!i(t,v)&&h(t),t}};return e[v]=!0,mi.exports}().onFreeze,o=Object.freeze;t({target:"Object",stat:!0,forced:e((function(){o(1)})),sham:!n},{freeze:function(t){return o&&r(t)?o(i(t)):t}})}();var Ci,Ei={};!function(){if(Ci)return Ei;Ci=1;var t=er(),n=fn(),e=ai();t({target:"Object",stat:!0,forced:w()((function(){e(1)}))},{keys:function(t){return e(n(t))}})}();var xi,Li,Oi,ji={};!function(){if(Oi)return ji;Oi=1;var t=ar(),n=Jn(),e=function(){if(Li)return xi;Li=1;var t=ar(),n=ur();return xi=t?{}.toString:function(){return"[object "+n(this)+"]"}}();t||n(Object.prototype,"toString",e,{unsafe:!0})}();var ki,_i,Mi,Ti,Ai,Pi,Ri,Yi={};function Bi(){if(Ti)return Mi;Ti=1;var t=sn(),n=wt(),e=fn(),r=Vn(),i=function(){if(_i)return ki;_i=1;var t=w();return ki=!t((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))}(),o=r("IE_PROTO"),a=Object,u=a.prototype;return Mi=i?a.getPrototypeOf:function(r){var i=e(r);if(t(i,o))return i[o];var c=i.constructor;return n(c)&&i instanceof c?c.prototype:i instanceof a?u:null}}!function(){if(Ri)return Yi;Ri=1;var t=er(),n=function(){if(Pi)return Ai;Pi=1;var t=C(),n=w(),e=dt(),r=Bi(),i=ai(),o=St(),a=e(pt().f),u=e([].push),c=t&&n((function(){var t=Object.create(null);return t[2]=2,!a(t,2)})),f=function(n){return function(e){for(var f,s=o(e),l=i(s),v=c&&null===r(s),p=l.length,h=0,d=[];p>h;)f=l[h++],t&&!(v?f in s:a(s,f))||u(d,n?[f,s[f]]:s[f]);return d}};return Ai={entries:f(!0),values:f(!1)}}().values;t({target:"Object",stat:!0},{values:function(t){return n(t)}})}();var Ii,Xi,Di,Wi,zi,Fi,Hi,Ni={};function Gi(){return Xi?Ii:(Xi=1,Ii="\t\n\v\f\r                　\u2028\u2029\ufeff")}function Ki(){if(Fi)return zi;Fi=1;var t=l(),n=w(),e=dt(),r=Ur(),i=function(){if(Wi)return Di;Wi=1;var t=dt(),n=bt(),e=Ur(),r=Gi(),i=t("".replace),o=RegExp("^["+r+"]+"),a=RegExp("(^|[^"+r+"])["+r+"]+$"),u=function(t){return function(r){var u=e(n(r));return 1&t&&(u=i(u,o,"")),2&t&&(u=i(u,a,"$1")),u}};return Di={start:u(1),end:u(2),trim:u(3)}}().trim,o=Gi(),a=e("".charAt),u=t.parseFloat,c=t.Symbol,f=c&&c.iterator,s=1/u(o+"-0")!=-1/0||f&&!n((function(){u(Object(f))}));return zi=s?function(t){var n=i(r(t)),e=u(n);return 0===e&&"-"===a(n,0)?-0:e}:u}!function(){if(Hi)return Ni;Hi=1;var t=er(),n=Ki();t({global:!0,forced:parseFloat!==n},{parseFloat:n})}();var Vi,Ui,$i,qi,Ji,Qi,Zi,to={};!function(){if(Zi)return to;Zi=1;var t=l(),n=Ui?Vi:(Ui=1,Vi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),e=function(){if(qi)return $i;qi=1;var t=dn()("span").classList,n=t&&t.constructor&&t.constructor.prototype;return $i=n===Object.prototype?void 0:n}(),r=function(){if(Qi)return Ji;Qi=1;var t=wr().forEach,n=Or()("forEach");return Ji=n?[].forEach:function(n){return t(this,n,arguments.length>1?arguments[1]:void 0)},Ji}(),i=kn(),o=function(t){if(t&&t.forEach!==r)try{i(t,"forEach",r)}catch(n){t.forEach=r}};for(var a in n)n[a]&&o(t[a]&&t[a].prototype);o(e)}();var no,eo={};!function(){if(no)return eo;no=1;var t=er(),n=rr(),e=cr(),r=Ct(),i=ge(),o=be(),a=St(),u=or(),c=vn(),f=lr(),s=$r(),l=f("slice"),v=c("species"),p=Array,h=Math.max;t({target:"Array",proto:!0,forced:!l},{slice:function(t,c){var f,l,d,y=a(this),g=o(y),m=i(t,g),b=i(void 0===c?g:c,g);if(n(y)&&((e(f=y.constructor)&&(f===p||n(f.prototype))||r(f)&&null===(f=f[v]))&&(f=void 0),f===p||void 0===f))return s(y,m,b);for(l=new(void 0===f?p:f)(h(b-m,0)),d=0;b>m;m++,d++)m in y&&u(l,d,y[m]);return l.length=d,l}})}();var ro,io,oo,ao,uo,co={};function fo(){if(io)return ro;io=1;var t=dt();return ro=t(1..valueOf)}!function(){if(uo)return co;uo=1;var t=er(),n=dt(),e=ye(),r=fo(),i=function(){if(ao)return oo;ao=1;var t=ye(),n=Ur(),e=bt(),r=RangeError;return oo=function(i){var o=n(e(this)),a="",u=t(i);if(0>u||u===1/0)throw new r("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(o+=o))1&u&&(a+=o);return a}}(),o=w(),a=RangeError,u=String,c=Math.floor,f=n(i),s=n("".slice),l=n(1..toFixed),v=function(t,n,e){return 0===n?e:n%2==1?v(t,n-1,e*t):v(t*t,n/2,e)},p=function(t,n,e){for(var r=-1,i=e;6>++r;)t[r]=(i+=n*t[r])%1e7,i=c(i/1e7)},h=function(t,n){for(var e=6,r=0;--e>=0;)t[e]=c((r+=t[e])/n),r=r%n*1e7},d=function(t){for(var n=6,e="";--n>=0;)if(""!==e||0===n||0!==t[n]){var r=u(t[n]);e=""===e?r:e+f("0",7-r.length)+r}return e};t({target:"Number",proto:!0,forced:o((function(){return"0.000"!==l(8e-5,3)||"1"!==l(.9,0)||"1.25"!==l(1.255,2)||"1000000000000000128"!==l(0xde0b6b3a7640080,0)}))||!o((function(){l({})}))},{toFixed:function(t){var n,i,o,c,l=r(this),y=e(t),g=[0,0,0,0,0,0],m="",b="0";if(0>y||y>20)throw new a("Incorrect fraction digits");if(l!=l)return"NaN";if(-1e21>=l||l>=1e21)return u(l);if(0>l&&(m="-",l=-l),l>1e-21)if(i=0>(n=function(t){for(var n=0,e=t;e>=4096;)n+=12,e/=4096;for(;e>=2;)n+=1,e/=2;return n}(l*v(2,69,1))-69)?l*v(2,-n,1):l/v(2,n,1),i*=4503599627370496,(n=52-n)>0){for(p(g,0,i),o=y;o>=7;)p(g,1e7,0),o-=7;for(p(g,v(10,o,1),0),o=n-1;o>=23;)h(g,1<<23),o-=23;h(g,1<<o),p(g,1,1),h(g,2),b=d(g)}else p(g,0,i),p(g,1<<-n,0),b=d(g)+f("0",y);return b=y>0?m+((c=b.length)>y?s(b,0,c-y)+"."+s(b,c-y):"0."+f("0",y-c)+b):m+b}})}();var so,lo,vo,po,ho,yo={};function go(){if(po)return vo;po=1;var t=x(),n=sn(),e=xt(),r=function(){if(lo)return so;lo=1;var t=On();return so=function(){var n=t(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e}}(),i=RegExp.prototype;return vo=function(o){var a=o.flags;return void 0!==a||"flags"in i||n(o,"flags")||!e(i,o)?a:t(r,o)}}!function(){if(ho)return yo;ho=1;var t=Gn().PROPER,n=Jn(),e=On(),r=Ur(),i=w(),o=go(),a="toString",u=RegExp.prototype,c=u[a];(i((function(){return"/a/b"!==c.call({source:"a",flags:"b"})}))||t&&c.name!==a)&&n(u,a,(function(){var t=e(this);return"/"+r(t.source)+"/"+r(o(t))}),{unsafe:!0})}();var mo,bo,So=function(t){return"object"===function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}(t)},wo=function(t){return+t.toFixed(arguments.length>1&&void 0!==arguments[1]?arguments[1]:2)},Co=function(t,n){for(var e in n)t.style[e]=n[e]},Eo=function(t){return{pageX:t.pageX||(document.body.scrollLeft||document.documentElement.scrollLeft)+t.clientX||0,pageY:t.pageY||(document.body.scrollTop||document.documentElement.scrollTop)+t.clientY||0}},xo=function(){return document.createElement("div")};var Lo=function(){if(bo)return mo;bo=1;var t=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function e(t,n){return!1!==n.clone&&n.isMergeableObject(t)?u(Array.isArray(t)?[]:{},t,n):t}function r(t,n,r){return t.concat(n).map((function(t){return e(t,r)}))}function i(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(n){return Object.propertyIsEnumerable.call(t,n)})):[]}(t))}function o(t,n){try{return n in t}catch(t){return!1}}function a(t,n,r){var a={};return r.isMergeableObject(t)&&i(t).forEach((function(n){a[n]=e(t[n],r)})),i(n).forEach((function(i){(function(t,n){return o(t,n)&&!(Object.hasOwnProperty.call(t,n)&&Object.propertyIsEnumerable.call(t,n))})(t,i)||(a[i]=o(t,i)&&r.isMergeableObject(n[i])?function(t,n){if(!n.customMerge)return u;var e=n.customMerge(t);return"function"==typeof e?e:u}(i,r)(t[i],n[i],r):e(n[i],r))})),a}function u(n,i,o){(o=o||{}).arrayMerge=o.arrayMerge||r,o.isMergeableObject=o.isMergeableObject||t,o.cloneUnlessOtherwiseSpecified=e;var u=Array.isArray(i);return u===Array.isArray(n)?u?o.arrayMerge(n,i,o):a(n,i,o):e(i,o)}return u.all=function(t,n){if(!Array.isArray(t))throw Error("first argument should be an array");return t.reduce((function(t,e){return u(t,e,n)}),{})},mo=u}(),Oo=u(Lo),jo={scale:1,canScale:!0,maxScale:10,minScale:.1,autoCenter:!0,autoScale:!0,containerAutoSize:!1,containerWidth:1e3,containerHeight:500,containerXPadding:800,containerYPadding:800,canvasWidth:1920,canvasHeight:1e3,proxyScaleKey:!0,useScrollBar:!0,useRuler:!0,usePositionLine:!0,positionLineConfig:{lineColor:"#6CC6A7",padding:3,adsorptionXList:[],adsorptionYList:[],adsorptionGap:4,zIndex:300,useRemove:!0,removeIcon:"",removeIconFillColor:"#525252"},canvasStyle:{},scrollBarConfig:{backgroundColor:"#000000",opacity:.4,zIndex:500,barSize:8},rulerConfig:{yRulerWidth:20,xRulerHeight:20,bgColor:"#f5f5f5",fontColor:"#797B80",fontSize:10,fontFamily:"Arial",lineColor:"#797B80",zIndex:400},onScale:function(){},onMove:function(){},adsorptionLineChange:function(){},positionLineChange:function(){}};Object.freeze(jo),module.exports=function(){return n((function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._init(n)}),[{key:"_init",value:function(t){if(!So(t))throw TypeError("options必须为对象");var n=Oo(jo,t);this._checkOptions(n),n.containerConfig={},n.canvasConfig={},this.opt=n,this._initContainer(),this._setContainerAttribute(),this._initCanvas(),n.proxyScaleKey&&document.addEventListener("keydown",this._keydownEvent.bind(this)),n.useScrollBar&&(n.wheelTimer=null)}},{key:"_checkOptions",value:function(t){if(!t.el)throw Error("容器不能为空");var n=t.el instanceof HTMLElement?t.el:document.querySelector(t.el);if(!n)throw Error(t.el+"容器不存在");if(!document.body.contains(n)&&!document.documentElement.contains(n))throw Error("页面上不存在该容器");t.containerEl=n;var e=t.minScale,r=t.maxScale;if(0>=e)throw Error("minScale必须大于0");if(0>=r)throw Error("maxScale必须大于0");if(e>r)throw Error("minScale不能大于maxScale")}},{key:"_keydownEvent",value:function(t){if(this.opt.canScale){var n=t.keyCode;if((t.metaKey||t.ctrlKey)&&(187===n||189===n))t.preventDefault(),this.changeScale(this.opt.scale+(187===n?.05:-.05))}}},{key:"_setTranslateBoundary",value:function(t,n){var e=this.opt,r=e.width,i=e.height,o=e.containerXPadding,a=e.containerYPadding,u=Math.max((r-t)/2,o),c=Math.max((i-n)/2,a),f=t+2*o>r?r-(t+o):u,s=n+2*a>i?i-(n+a):c;e.canvasConfig.maxTranslateX=u,e.canvasConfig.maxTranslateY=c,e.canvasConfig.minTranslateX=f,e.canvasConfig.minTranslateY=s}},{key:"_initContainer",value:function(){var t,n,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.opt;r.containerAutoSize?(t=parseFloat(r.containerEl.offsetWidth),n=parseFloat(r.containerEl.offsetHeight),r.containerConfig.originWidth=t,r.containerConfig.originHeight=n,r.addResize||this._onContainerResize()):(n=r.canvasHeight,r.containerEl.style.width=(t=r.canvasWidth)+"px",r.containerEl.style.height=n+"px");var i=getComputedStyle(r.containerEl);"border-box"===i.boxSizing&&(t-=parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),n-=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)),r.width=t,r.height=n,"static"===i.position&&(r.containerEl.style.position="relative"),r.containerEl.style.overflow="hidden",r.useRuler&&this._initRuler(e)}},{key:"_setContainerAttribute",value:function(){var t=this.opt.containerEl,n=e(t.classList);n.push("scale-ruler"),t.setAttribute("class",n.join(" ")),t.style.backgroundColor="#f5f5f5",t.style.backgroundImage="linear-gradient(#f5f5f5 14px, transparent 0),linear-gradient(90deg, transparent 14px, #373739 0)",t.style.backgroundSize="15px 15px,15px 15px"}},{key:"_onContainerResize",value:function(){var t=this,n=this.opt,e=n.containerEl,r=n.containerConfig;r.addResize=!0,new ResizeObserver((function(n){var i,a=function(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=o(t))||n){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return t.length>r?{done:!1,value:t[r++]}:{done:!0}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==e.return||e.return()}finally{if(c)throw a}}}}(n);try{for(a.s();!(i=a.n()).done;){if(i.value.target===e)e.offsetWidth===r.originWidth&&e.offsetHeight===r.originHeight||(t._initContainer(!0),t._initCanvas(!0))}}catch(t){a.e(t)}finally{a.f()}})).observe(e)}},{key:"_repaintRuler",value:function(t){var n=this.opt,e=n.rulerConfig,r=n.canvasConfig,i=n.scale,o=t?n.vCtx:n.hCtx,a=t?e.yRulerWidth:e.xRulerHeight,u=t?a:n.width,c=t?n.height:a;o.clearRect(0,0,u,c);var f=t?r.translateY:r.translateX;o.save(),o.fillStyle=e.bgColor,o.fillRect(0,0,u,c),o.restore();var s=function(t){return t>.25?t>.5?t>1?t>2?t>4?1:2:5:10:20:40}(i),l=s*i,v=window.devicePixelRatio,p=Math.floor(-f/l),h=Math.floor(((t?c:u)-f)/l);o.save(),o.fillStyle=e.lineColor,o.translate(.5,.5),o.scale(1/v,1/v),t?(o.rotate(Math.PI/2),o.fillRect(0,-(a-1)*v,c*v,1)):o.fillRect(0,(a-1)*v,u*v,1);for(var d=p;h>=d;d++){o.fillStyle=e.lineColor;var y=(f+d*l)*v,g=a/4;if(d%10==0?g=4*a/5:d%5==0&&(g=a/3),o.fillRect(y,t?-a*v:(a-g)*v,1,g*v),d%10==0){var m=d*s+"";o.font="".concat(e.fontSize*v,"px ").concat(e.fontFamily),o.fillStyle=e.fontColor,o.fillText(m,y+2*v,t?-(a-g)*v:(a+8-g)*v)}}o.restore()}},{key:"_initRuler",value:function(){var t=this.opt,n=t.rulerConfig;t.hRuler||(t.hRuler=this._createRuler(!1),t.hCtx=t.hRuler.getContext("2d")),t.vRuler||(t.vRuler=this._createRuler(!0),t.vCtx=t.vRuler.getContext("2d")),t.hRuler.setAttribute("width",t.width),t.hRuler.setAttribute("height",n.xRulerHeight),t.vRuler.setAttribute("height",t.height),t.vRuler.setAttribute("width",n.yRulerWidth)}},{key:"_createRuler",value:function(t){var n=this.opt,e=document.createElement("canvas");e.style.position="absolute",e.style.left=0,e.style.top=0;var r=n.rulerConfig.zIndex;return e.style.zIndex=t?r:r+1,n.containerEl.appendChild(e),n.usePositionLine&&this._initPositionLine(n,t,e),e}},{key:"_initPositionLine",value:function(t,n,e){var r=t.positionLineConfig,i=t.rulerConfig;r.id=r.id||0,r.lines=r.lines||{};var o=r.lineColor,a=r.padding,u=r.positionLineWrapEl;u||(u=xo(),r.positionLineWrapEl=u,t.containerEl.appendChild(u));var c,f={top:(c=e.getBoundingClientRect()).top+(document.body.scrollTop||document.documentElement.scrollTop),left:c.left+(document.body.scrollLeft||document.documentElement.scrollLeft)},s=this;function l(n){if(i.isMouseDown){n.preventDefault();var e=Eo(n),o=r.currentNodeInfo;if(o){var a=o.positionEl,u=o.dir,c=o.tipEl,l="y"===u,v=0;l?(a.style.visibility=e.pageY>f.top+i.xRulerHeight?"visible":"hidden",v=e.pageY-f.top):(a.style.visibility=e.pageX>f.left+i.yRulerWidth?"visible":"hidden",v=e.pageX-f.left);var p=s._translateToCoordinate(t,l,v),h=s._checkAdSorptionLine(p,l,v);s._setLineTranslate(l,h.translate,a),s._checkTipPosition(h.translate,u,a,c),o.translate=h.translate,o.coordinate=h.coordinate,c.innerHTML="".concat(u.toUpperCase(),": ").concat(wo(h.coordinate)," px")}}}e.addEventListener("mousedown",(function(){i.isMouseDown=!0;var e=xo(),c={position:"absolute",visibility:"hidden",backgroundColor:"transparent",zIndex:r.zIndex},f=xo(),s={position:"absolute",backgroundColor:o},v=xo(),p={position:"absolute",padding:"5px",lineHeight:"18px",minWidth:"80px",backgroundColor:"rgba(0,0,0,.8)",color:"#fff",fontSize:"12px",borderRadius:"4px",userSelect:"none",textAlign:"center"},h="y",d=2*a+1;n?(Object.assign(c,{width:d+"px",height:t.height+"px",cursor:"col-resize",top:0,left:-a+"px"}),Object.assign(s,{top:0,height:"100%",width:"1px",left:a+"px"}),Object.assign(p,{top:"50%",left:d+"px",transform:"translate(0, -50%)"}),h="x"):(Object.assign(c,{height:d+"px",width:t.width+"px",cursor:"row-resize",left:0,top:-a+"px"}),Object.assign(s,{left:0,width:"100%",height:"1px",top:a+"px"}),Object.assign(p,{left:"50%",top:d+"px",transform:"translate(-50%, 0)"})),Co(e,c),Co(f,s),Co(v,p),e.setAttribute("data-id",r.id),e.appendChild(f),e.appendChild(v),u.appendChild(e);var y={positionEl:e,id:r.id,tipEl:v,translate:0,dir:h};r.lines[r.id++]=y,r.currentNodeInfo=y,document.addEventListener("mousemove",l)})),document.addEventListener("mouseup",(function(t){if(i.isMouseDown){i.isMouseDown=!1;var n=Eo(t),e=r.currentNodeInfo;if(e){var o=e.positionEl,a=e.id,c="y"===e.dir;if(!c&&f.left+i.yRulerWidth>=n.pageX||c&&f.top+i.xRulerHeight>=n.pageY)u.removeChild(o),delete r.lines[a];else{var v=s._checkAdSorptionLine(e.coordinate,c,e.translate);e.translate=v.translate,e.coordinate=v.coordinate,s._setLineTranslate(c,e.translate,o),s._addPositionLineEvent(e,f,c),s._positionLineChange(c)}}r.currentNodeInfo=null,document.removeEventListener("mousemove",l)}}))}},{key:"_checkAdSorptionLine",value:function(t,n,e){var r=this.opt.positionLineConfig,i=r.adsorptionGap,o=n?r.adsorptionYList:r.adsorptionXList,a={coordinate:t,translate:e},u=o.length,c=Math.max(i,i/this.opt.scale);if(u>0)for(var f=0;u>f;){var s=o[f];if(c>=Math.abs(t-s)){a.coordinate=s,a.translate=this._coordinateToTranslate(s,n);break}if(s>t)break;f++}return a}},{key:"_addPositionLineEvent",value:function(t,n,e){var r=t.positionEl,i=t.tipEl,o=this.opt,a=o.positionLineConfig,u=o.rulerConfig,c=this;function f(t){if(a.isMouseDown){t.preventDefault();var n=a.currentNodeInfo,r=Eo(t),i=n.dir,o=n.tipEl,u=n.originTranslate,f=n.positionEl,s=(void 0===u?0:u)+((e?r.pageY:r.pageX)-n.start),l=c._translateToCoordinate(c.opt,e,s),v=c._checkAdSorptionLine(l,e,s);c._setLineTranslate(e,v.translate,f),c._checkTipPosition(v.translate,i,f,o),n.translate=v.translate,n.coordinate=v.coordinate,o.innerHTML="".concat(i.toUpperCase(),": ").concat(wo(v.coordinate)," px")}}r.addEventListener("mouseenter",(function(){i.style.display="block"})),r.addEventListener("mouseleave",(function(){i.style.display="none"})),r.addEventListener("mousedown",(function(n){n.preventDefault(),a.isMouseDown=!0;var r=Eo(n);t.start=e?r.pageY:r.pageX,t.originTranslate=t.translate,t.tipEl.style.display="block",a.currentNodeInfo=t,document.addEventListener("mousemove",f)})),document.addEventListener("mouseup",(function(t){if(a.isMouseDown){a.isMouseDown=!1;var r=a.currentNodeInfo;if(r){var i=r.positionEl,o=r.id,s=Eo(t);if(!e&&n.left+u.yRulerWidth>=s.pageX||e&&n.top+u.xRulerHeight>=s.pageY)i.parentNode.removeChild(i),delete a.lines[o];else{var l=c._checkAdSorptionLine(r.coordinate,e,r.translate);r.translate=l.translate,r.coordinate=l.coordinate,c._setLineTranslate(e,r.translate,i),delete r.originTranslate,delete r.start}}c._positionLineChange(e),a.currentNodeInfo=null,document.removeEventListener("mousemove",f)}}))}},{key:"_coordinateToTranslate",value:function(t,n){var e=this.opt,r=e.canvasConfig;return(n?r.translateY:r.translateX)+t*e.scale}},{key:"_translateToCoordinate",value:function(t,n,e){var r=t.canvasConfig;return(e-(n?r.translateY:r.translateX))/t.scale}},{key:"_initCanvas",value:function(){var t=this.opt,n=t.canvasEl;n||((n=xo()).style.position="absolute",n.style.left=0,n.style.top=0,n.style.transformOrigin="0 0",t.canvasEl=n,this._modifyAdsorptionLine([0,t.canvasWidth],!0,!1),this._modifyAdsorptionLine([0,t.canvasHeight],!0,!0),t.containerEl.appendChild(n),t.containerEl.addEventListener("mousewheel",this._mousewheelEvent.bind(this))),n.style.width=t.canvasWidth+"px",n.style.height=t.canvasHeight+"px";var e=t.scale,r=e,i=t.autoCenter;t.autoScale&&(r=Math.min((t.width-160)/t.canvasWidth,(t.height-160)/t.canvasHeight));var o=0,a=0,u=t.canvasWidth*r,c=t.canvasHeight*r;if(i&&(o=Math.floor((t.width-u)/2),a=Math.floor((t.height-c)/2),t.canvasConfig.translateX=o,t.canvasConfig.translateY=a),this._setTranslateBoundary(u,c),r!==e&&(t.scale=r,this._onScale()),t.canvasConfig.originTransform={scale:r,translateX:o,translateY:a},So(t.canvasStyle))for(var f in t.canvasStyle)t.canvasEl.style[f]=t.canvasStyle[f];this._transformCanvas(),this._checkLarge()}},{key:"_transformCanvas",value:function(){var t=this.opt,n=t.scale,e=t.canvasConfig;t.canvasEl.style.transform="translate(".concat(e.translateX,"px, ").concat(e.translateY,"px) scale(").concat(n,")"),t.useRuler&&(this._repaintRuler(!1),this._repaintRuler(!0)),t.usePositionLine&&this._changeLinesTranslate()}},{key:"_checkLarge",value:function(){var t=this.opt,n=t.scale,e=t.canvasConfig,r=t.containerConfig,i=t.useScrollBar,o=t.scrollBarConfig,a=e.translateX,u=e.translateY,c=t.canvasWidth*n+2*t.containerXPadding,f=t.canvasHeight*n+2*t.containerYPadding;e.totalWidth=c,e.totalHeight=f;var s=c>t.width,l=f>t.height;if(r.isLarge=s||l,r.isXLarge=s,r.isYLarge=l,i){var v="none",p="none";if(s){p="block",t.hScrollBar||(t.hScrollBar=this._createScrollBar(!1)),t.hScrollBar.style.left=t.width*((t.containerXPadding-a)/c)+"px";var h=t.width/c*t.width;t.hScrollBar.style.width=h+"px",o.width=h}if(t.hScrollBar&&(t.hScrollBar.style.display=p),l){t.vScrollBar||(t.vScrollBar=this._createScrollBar(!0)),v="block",t.vScrollBar.style.top=t.height*((t.containerYPadding-u)/f)+"px";var d=t.height/f*t.height;t.vScrollBar.style.height=d+"px",o.height=d}t.vScrollBar&&(t.vScrollBar.style.display=v)}}},{key:"_setLineTranslate",value:function(t,n,e){e.style.transform="translate(".concat(t?"0, ".concat(n,"px"):"".concat(n,"px, 0"),")")}},{key:"_changeLinesTranslate",value:function(){var t=this,n=this.opt.positionLineConfig.lines;Object.keys(n).forEach((function(e){var r=n[e],i=r.dir,o=r.positionEl,a=r.tipEl,u="y"===i,c=t._coordinateToTranslate(r.coordinate,u);t._setLineTranslate(u,c,o),t._checkTipPosition(c,i,o,a),r.translate=c}))}},{key:"_checkTipPosition",value:function(t,n,e,r){var i=this.opt,o=i.width;if("y"===n){var a=r.offsetHeight,u=e.offsetHeight;r.style.top=(i.height>t+u+a?u:-a)+"px"}else{var c=r.offsetWidth,f=e.offsetWidth;r.style.left=(o>t+f+c?f:-c)+"px"}}},{key:"_mousewheelEvent",value:function(t){var n=this;if(t.preventDefault(),t.metaKey||t.ctrlKey){this.changeScale(this.opt.scale+-1*t.deltaY/100)}else{var e=this.opt,r=e.containerConfig,i=e.canvasConfig,o=e.hScrollBar,a=e.vScrollBar;if(!r.isLarge||e.scrollBarConfig.isMouseDown)return;t.preventDefault(),this.opt.wheelTimer&&clearTimeout(this.opt.wheelTimer);var u=-t.deltaX,c=-t.deltaY,f="",s=this.opt.scrollBarConfig.opacity,l=void 0===s?.4:s,v=i.translateX,p=i.translateY;if(r.isXLarge&&Math.abs(u)>Math.abs(c)){f="h";var h=this.opt.containerXPadding-(v=Math.max(Math.min(v+=u,i.maxTranslateX),i.minTranslateX));o.style.opacity=l,a&&(a.style.opacity=0),o.style.left=this.opt.width*(h/i.totalWidth)+"px",i.translateX=v,this._onMove(v,p)}if(r.isYLarge&&Math.abs(c)>Math.abs(u))f="v",p=Math.max(Math.min(p+=c,i.maxTranslateY),i.minTranslateY),a.style.opacity=l,o&&(o.style.opacity=0),a.style.top=this.opt.height*((this.opt.containerYPadding-p)/i.totalHeight)+"px",i.translateY=p,this._onMove(v,p);this._transformCanvas(),f&&(this.opt.wheelTimer=setTimeout((function(){n.opt.scrollBarConfig.isMouseEnter||(("h"===f?o:a).style.opacity=0)}),1e3))}}},{key:"_onMove",value:function(t,n){"function"==typeof this.opt.onMove&&this.opt.onMove(t,n)}},{key:"_createScrollBar",value:function(t){var n=this.opt,e=xo(),r={position:"absolute",display:"none",borderRadius:"4px",backgroundColor:"#000000",opacity:0,transition:"opacity 300ms",cursor:"pointer",zIndex:n.scrollBarConfig.zIndex};return t?(r.right=0,r.width="8px"):(r.bottom=0,r.height="8px"),Co(e,r),this._addScrollBarEvent(e,t),n.containerEl.appendChild(e),e}},{key:"_addScrollBarEvent",value:function(t,n){var e=this,r=this.opt,i=r.scrollBarConfig,o=r.canvasConfig,a=function(a){if(a.preventDefault(),i.isMouseDown){var u=o.translateX,c=o.translateY,f=Eo(a);if(n){var s=i.top+(f.pageY-i.startY);t.style.top=(s=Math.min(Math.max(0,s),r.height-i.height))+"px",o.translateY=c=r.containerYPadding-s*o.totalHeight/r.height}else{var l=i.left+(f.pageX-i.startX);t.style.left=(l=Math.min(Math.max(0,l),r.width-i.width))+"px",o.translateX=u=r.containerXPadding-l*o.totalWidth/r.width}e._transformCanvas(),e._onMove(u,c)}};t.addEventListener("mouseenter",(function(){i.isMouseEnter=!0,t.style.opacity=i.opacity,n?i.hScrollBar&&(i.hScrollBar.style.opacity=0):i.vScrollBar&&(i.vScrollBar.style.opacity=0)})),t.addEventListener("mouseleave",(function(){i.isMouseDown||(i.isMouseEnter=!1,t.style.opacity=0)})),t.addEventListener("mousedown",(function(e){e.preventDefault(),i.isMouseDown=!0;var r=Eo(e);n?(i.startY=r.pageY,i.top=parseFloat(t.style.top)):(i.left=parseFloat(t.style.left),i.startX=r.pageX),document.addEventListener("mousemove",a)})),document.addEventListener("mouseup",(function(){i.isMouseDown&&(i.isMouseDown=!1,i.isMouseEnter=!1,document.removeEventListener("mousemove",a))}))}},{key:"_modifyAdsorptionLine",value:function(t){var n=1>=arguments.length||void 0===arguments[1]||arguments[1],e=2>=arguments.length||void 0===arguments[2]||arguments[2],r=this.opt.positionLineConfig,i=e?r.adsorptionYList:r.adsorptionXList;t.forEach((function(t){var e=i.indexOf(t);n?-1===e&&i.push(t):e>-1&&i.splice(e,1)})),n&&i.sort((function(t,n){return t-n})),"function"==typeof this.opt.adsorptionLineChange&&this.opt.adsorptionLineChange(i,e)}},{key:"getCanvasEl",value:function(){return this.opt.canvasEl}},{key:"updateCanvasRect",value:function(t){var n=t.width,e=t.height;e&&(this.opt.canvasHeight=e),n&&(this.opt.canvasWidth=n),this._initCanvas()}},{key:"removeAdsorptionLine",value:function(t,n){this._modifyAdsorptionLine(t,!1,n)}},{key:"addAdsorptionLine",value:function(t,n){this._modifyAdsorptionLine(t,!0,n)}},{key:"changeScale",value:function(t){if(this.opt.canScale){var n=this.opt,e=n.scale,r=n.canvasConfig,i=r.translateX,o=r.translateY,a=(t=Math.min(Math.max(t,n.minScale),n.maxScale))-e;n.scale=t,this._setTranslateBoundary(n.canvasWidth*t,n.canvasHeight*t),o-=a*n.canvasHeight/2,i=Math.max(Math.min(i-=a*n.canvasWidth/2,r.maxTranslateX),r.minTranslateY),o=Math.max(Math.min(o,r.maxTranslateY),r.minTranslateY),r.translateX=i,r.translateY=o,this._transformCanvas(),this._checkLarge(),this._onScale()}}},{key:"_onScale",value:function(){"function"==typeof this.opt.onScale&&this.opt.onScale(this.opt.scale)}},{key:"_positionLineChange",value:function(t){var n=Object.values(this.opt.positionLineConfig.lines).filter((function(n){return n.dir===t?"y":"x"})).map((function(t){return t.coordinate}));"function"==typeof this.opt.positionLineChange&&i(this.opt.positionLineChange(n,t))}},{key:"removeAllPositionLine",value:function(){var t=this.opt.positionLineConfig,n=t.lines,e=t.positionLineWrapEl;for(var r in n){e.removeChild(n[r].positionEl)}this.opt.positionLineConfig.lines=[]}},{key:"hideAllPositionLine",value:function(){var t=this.opt.positionLineConfig.lines;for(var n in t){t[n].positionEl.style.display="none"}}},{key:"showAllPositionLine",value:function(){var t=this.opt.positionLineConfig.lines;for(var n in t){t[n].positionEl.style.display="block"}}},{key:"_toggleRuler",value:function(){var t=0>=arguments.length||void 0===arguments[0]||arguments[0],n=this.opt,e=t?"none":"block";n.hRuler&&(n.hRuler.style.display=e),n.vRuler&&(n.vRuler.style.display=e),t?this.hideAllPositionLine():this.showAllPositionLine()}},{key:"hideRuler",value:function(){this._toggleRuler()}},{key:"showRuler",value:function(){this._toggleRuler(!1)}},{key:"forbidScale",value:function(){this.opt.canScale=!1}},{key:"allowScale",value:function(){this.opt.canScale=!0}},{key:"reset",value:function(){var t=this.opt.canvasConfig.originTransform;if(t){var n=t.translateX,e=t.translateY;this.opt.scale=t.scale,this.opt.canvasConfig.translateX=n,this.opt.canvasConfig.translateY=e,this._transformCanvas(),this._checkLarge()}}}])}();
